{"ast":null,"code":"var _jsxFileName = \"/home/sonic/Downloads/pos-frontend/src/Billing.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport jsPDF from 'jspdf';\nimport styles from './style';\n// Import custom font to support Devanagari script (Nepali)\nimport \"jspdf-autotable\";\nimport { fontLoader } from 'jspdf';\n// Constants\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:5000';\nconst QR_STATES = {\n  IDLE: 'idle',\n  LOADING: 'loading',\n  SUCCESS: 'success',\n  ERROR: 'error',\n  PAID: 'paid',\n  FAILED: 'failed'\n};\nfunction Billing({\n  username\n}) {\n  _s();\n  // State for item management\n  const [items, setItems] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [customItemName, setCustomItemName] = useState('');\n  const [customItemPrice, setCustomItemPrice] = useState('');\n  const [customItemImage, setCustomItemImage] = useState(null);\n  const [quantity, setQuantity] = useState('');\n  const [billItems, setBillItems] = useState([]);\n\n  // State for payment handling\n  const [amountGiven, setAmountGiven] = useState('');\n  const [exchange, setExchange] = useState(0);\n  const [paymentMethod, setPaymentMethod] = useState(null);\n  const [qrStatus, setQrStatus] = useState(QR_STATES.IDLE);\n  const [qrImageUrl, setQrImageUrl] = useState('');\n\n  // State for invoice management\n  const [invoiceNumber, setInvoiceNumber] = useState('');\n  const [isLoadingInvoiceNumber, setIsLoadingInvoiceNumber] = useState(true);\n\n  // State for image viewer\n  const [showImageViewer, setShowImageViewer] = useState(false);\n  const [currentImageUrl, setCurrentImageUrl] = useState('');\n\n  // Refs\n  const statusCheckIntervalRef = useRef(null);\n  const transactionIdRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Initialize component - fetch invoice number and items\n  useEffect(() => {\n    fetchLastInvoiceNumber();\n    fetchItems();\n\n    // Cleanup function for intervals when component unmounts\n    return () => {\n      if (statusCheckIntervalRef.current) {\n        clearInterval(statusCheckIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Add ESC key listener for closing image viewer\n  useEffect(() => {\n    const handleEscKey = event => {\n      if (event.key === 'Escape' && showImageViewer) {\n        setShowImageViewer(false);\n      }\n    };\n    window.addEventListener('keydown', handleEscKey);\n\n    // Cleanup event listener when component unmounts\n    return () => {\n      window.removeEventListener('keydown', handleEscKey);\n    };\n  }, [showImageViewer]);\n\n  // Fetch available items from backend\n  const fetchItems = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/items`);\n      setItems(response.data);\n    } catch (error) {\n      console.error('Error fetching items:', error);\n    }\n  };\n\n  // Fetch the last invoice number and generate next one\n  const fetchLastInvoiceNumber = async () => {\n    setIsLoadingInvoiceNumber(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/last-invoice-number`);\n      if (response.data && typeof response.data.lastInvoiceNumber !== 'undefined') {\n        const lastNumber = parseInt(response.data.lastInvoiceNumber, 10) || 0;\n        const newInvoiceNumber = (lastNumber + 1).toString().padStart(5, '0');\n        setInvoiceNumber(newInvoiceNumber);\n      } else {\n        setInvoiceNumber('00001');\n      }\n    } catch (error) {\n      console.error('Error fetching last invoice number:', error);\n      setInvoiceNumber('00001'); // Start with '00001' if there's an error\n    } finally {\n      setIsLoadingInvoiceNumber(false);\n    }\n  };\n\n  // Calculate the total bill amount\n  const calculateTotalAmount = () => {\n    return billItems.reduce((total, item) => total + item.total, 0);\n  };\n  const totalAmount = calculateTotalAmount();\n  // Add selected item to the bill\n  const addItemToBill = () => {\n    if (!selectedItem && !customItemName || !quantity) {\n      alert('Please select or enter an item and enter quantity.');\n      return;\n    }\n    const itemPrice = customItemName ? parseFloat(customItemPrice || '0') : selectedItem.price;\n    const itemImage = selectedItem ? selectedItem.imageUrl : null;\n    const itemName = customItemName || selectedItem.name;\n    const quantityToAdd = parseInt(quantity);\n\n    // Check if item already exists in the bill\n    const existingItemIndex = billItems.findIndex(item => item.name === itemName);\n    if (existingItemIndex !== -1) {\n      // Update existing item\n      const updatedBillItems = [...billItems];\n      const existingItem = updatedBillItems[existingItemIndex];\n      existingItem.quantity += quantityToAdd;\n      existingItem.total = existingItem.price * existingItem.quantity;\n      setBillItems(updatedBillItems);\n    } else {\n      // Add new item\n      const newItem = {\n        name: itemName,\n        price: itemPrice,\n        quantity: quantityToAdd,\n        total: itemPrice * quantityToAdd,\n        imageUrl: itemImage\n      };\n      setBillItems([...billItems, newItem]);\n    }\n    resetItemFields();\n  };\n\n  // Reset item input fields\n  const resetItemFields = () => {\n    setQuantity('');\n    setSelectedItem(null);\n    setCustomItemName('');\n    setCustomItemPrice('');\n    setCustomItemImage(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Remove an item from the bill\n  const removeItem = itemIndex => {\n    const updatedItems = billItems.filter((_, index) => index !== itemIndex);\n    setBillItems(updatedItems);\n  };\n\n  // Reset the entire billing form\n  const refreshBill = () => {\n    // Confirm before refreshing if there are items in the bill\n    if (billItems.length > 0) {\n      const confirmRefresh = window.confirm(\"Are you sure you want to clear the current bill and start over?\");\n      if (!confirmRefresh) return;\n    }\n\n    // Reset all states to initial values\n    setBillItems([]);\n    resetItemFields();\n    setAmountGiven('');\n    setExchange(0);\n    setPaymentMethod(null);\n    setQrStatus(QR_STATES.IDLE);\n    setQrImageUrl('');\n\n    // Fetch a new invoice number for the next bill\n    fetchLastInvoiceNumber();\n\n    // Clear any ongoing interval\n    if (statusCheckIntervalRef.current) {\n      clearInterval(statusCheckIntervalRef.current);\n      statusCheckIntervalRef.current = null;\n    }\n    transactionIdRef.current = null;\n  };\n\n  // Handle payment completion and save invoice\n  const handlePaymentComplete = async () => {\n    if (isLoadingInvoiceNumber) {\n      alert(\"Invoice number is still loading. Please wait a moment.\");\n      return;\n    }\n    if (!invoiceNumber) {\n      alert(\"Invalid invoice number. Please refresh the page and try again.\");\n      return;\n    }\n\n    // Prepare invoice data\n    const invoiceData = {\n      invoiceNumber,\n      seller: username,\n      date: new Date().toISOString(),\n      items: billItems,\n      totalAmount,\n      paymentMethod,\n      transactionId: paymentMethod === \"online\" ? transactionIdRef.current : null,\n      amountGiven: paymentMethod === \"cash\" ? parseFloat(amountGiven) : null,\n      exchange: paymentMethod === \"cash\" ? exchange : null,\n      cashier: username\n    };\n    try {\n      // Save invoice to database\n      const response = await axios.post(`${API_BASE_URL}/save-invoice`, invoiceData);\n      if (response.status !== 201) {\n        throw new Error(\"Failed to save invoice to the database.\");\n      }\n\n      // Generate and print PDF\n      generateInvoicePDF(invoiceData);\n\n      // Reset the form for a new bill\n      refreshBill();\n    } catch (error) {\n      console.error(\"Error saving invoice:\", error);\n      alert(\"Failed to save invoice. Please try again.\");\n    }\n  };\n\n  // Calculate exchange amount for cash payments\n  const calculateExchange = () => {\n    if (!amountGiven) {\n      alert('Please enter the amount given by the customer.');\n      return;\n    }\n    const exchangeAmount = parseFloat(amountGiven) - totalAmount;\n    setExchange(exchangeAmount);\n\n    // If exchange is valid, automatically save the invoice\n    if (exchangeAmount >= 0) {\n      handlePaymentComplete();\n    } else {\n      alert('Amount given is less than the total amount!');\n    }\n  };\n\n  // Fetch FonePay QR code for online payment\n  const fetchFonePayQR = async () => {\n    try {\n      setQrStatus(QR_STATES.LOADING);\n\n      // Generate a unique transaction ID\n      const uniqueTransactionId = `ORDER-${Date.now()}`;\n      transactionIdRef.current = uniqueTransactionId;\n\n      // In a real application, you would make this API call to FonePay\n      // For demo purposes, we're simulating the API response\n      setTimeout(() => {\n        setQrImageUrl('https://placeholder.com/qr-code'); // Placeholder QR image\n        setQrStatus(QR_STATES.SUCCESS);\n        startPaymentStatusCheck(uniqueTransactionId);\n      }, 1500);\n    } catch (error) {\n      console.error('Error fetching QR code:', error);\n      setQrStatus(QR_STATES.ERROR);\n    }\n  };\n\n  // Start checking for payment status\n  const startPaymentStatusCheck = transactionId => {\n    if (statusCheckIntervalRef.current) {\n      clearInterval(statusCheckIntervalRef.current);\n    }\n\n    // For demo purposes, we'll simulate a successful payment after 5 seconds\n    statusCheckIntervalRef.current = setTimeout(() => {\n      setQrStatus(QR_STATES.PAID);\n      handlePaymentComplete(); // Automatically save invoice when online payment is complete\n    }, 5000);\n  };\n\n  // Save custom item with image to database\n  const saveCustomItem = async () => {\n    if (!customItemName || !customItemPrice || !customItemImage) {\n      alert('Please enter item name, price, and select an image.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('name', customItemName);\n      formData.append('price', customItemPrice);\n      formData.append('image', customItemImage);\n      const response = await axios.post(`${API_BASE_URL}/add-item`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (response.status === 201) {\n        alert('Item added successfully!');\n        fetchItems(); // Refresh the items list\n        resetItemFields();\n      }\n    } catch (error) {\n      console.error('Error saving custom item:', error);\n      alert('Failed to save item. Please try again.');\n    }\n  };\n\n  // Generate PDF and save invoice\n  const printBill = async () => {\n    if (isLoadingInvoiceNumber) {\n      alert(\"Invoice number is still loading. Please wait a moment.\");\n      return;\n    }\n    if (!invoiceNumber) {\n      alert(\"Invalid invoice number. Please refresh the page and try again.\");\n      return;\n    }\n\n    // Prepare invoice data\n    const invoiceData = {\n      invoiceNumber,\n      seller: username,\n      date: new Date().toISOString(),\n      items: billItems,\n      totalAmount,\n      paymentMethod,\n      transactionId: paymentMethod === \"online\" ? transactionIdRef.current : null,\n      amountGiven: paymentMethod === \"cash\" ? parseFloat(amountGiven) : null,\n      exchange: paymentMethod === \"cash\" ? exchange : null,\n      cashier: username\n    };\n    try {\n      // Generate PDF document\n      const pdfBlob = generateInvoicePDF(invoiceData);\n\n      // Create form data to send both invoice data and PDF\n      const formData = new FormData();\n      formData.append('invoice', JSON.stringify(invoiceData));\n      formData.append('pdf', pdfBlob, `invoice_${invoiceData.invoiceNumber}.pdf`);\n\n      // Save invoice and PDF to database\n      const response = await axios.post(`${API_BASE_URL}/save-invoice`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (response.status !== 201) {\n        throw new Error(\"Failed to save invoice to the database.\");\n      }\n\n      // Backend will handle the printing after saving invoice\n      refreshBill(); // Reset the form for a new bill\n    } catch (error) {\n      console.error(\"Error saving invoice:\", error);\n      alert(\"Failed to save invoice. Please try again.\");\n    }\n  };\n\n  // Generate PDF invoice and open print dialog\n  const generateInvoicePDF = invoiceData => {\n    const doc = new jsPDF();\n    const pageHeight = doc.internal.pageSize.height;\n    const pageWidth = doc.internal.pageSize.width;\n    const centerX = pageWidth / 2;\n    let yPosition = 20;\n\n    // Header - Company Info\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.setFontSize(20);\n    doc.text(\"New Rochak Khadya Udhyog\", centerX, yPosition, {\n      align: \"center\"\n    });\n    yPosition += 10;\n    doc.setFontSize(12);\n    doc.text(\"Bharatpur-7, Chitwan\", centerX, yPosition, {\n      align: \"center\"\n    });\n\n    // Contact Info\n    yPosition += 8;\n    doc.setFontSize(10);\n    doc.text(\"Mobile: 9845068407\", centerX, yPosition, {\n      align: \"center\"\n    });\n    yPosition += 6;\n    doc.text(\"PAN: 605233483\", centerX, yPosition, {\n      align: \"center\"\n    });\n\n    // Bill Title\n    yPosition += 10;\n    doc.setFontSize(16);\n    doc.text(\"INVOICE\", centerX, yPosition, {\n      align: \"center\"\n    });\n\n    // Invoice Details Box\n    yPosition += 15;\n    doc.setFontSize(10);\n    doc.setDrawColor(200, 200, 200);\n    doc.rect(15, yPosition - 5, pageWidth - 30, 25);\n\n    // Left side details\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.text(\"Invoice No:\", 20, yPosition);\n    doc.text(\"Date:\", 20, yPosition + 8);\n\n    // Right side details\n    doc.text(\"Cashier:\", pageWidth - 80, yPosition);\n    doc.text(\"Payment:\", pageWidth - 80, yPosition + 8);\n\n    // Values in normal font\n    doc.setFont(\"Helvetica\", \"normal\");\n    doc.text(invoiceNumber, 60, yPosition);\n    doc.text(new Date().toLocaleString(), 60, yPosition + 8);\n    doc.text(username, pageWidth - 40, yPosition);\n    doc.text(paymentMethod.toUpperCase(), pageWidth - 40, yPosition + 8);\n\n    // Items Table\n    yPosition += 25;\n    doc.setFillColor(240, 240, 240);\n    doc.rect(15, yPosition - 5, pageWidth - 30, 10, 'F');\n\n    // Table Headers\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.text(\"#\", 20, yPosition);\n    doc.text(\"Item Description\", 35, yPosition);\n    doc.text(\"Qty\", 120, yPosition);\n    doc.text(\"Rate\", 140, yPosition);\n    doc.text(\"Amount\", 170, yPosition);\n\n    // Table Content\n    yPosition += 10;\n    doc.setFont(\"Helvetica\", \"normal\");\n    billItems.forEach((item, index) => {\n      // Add new page if needed\n      if (yPosition > pageHeight - 60) {\n        doc.addPage();\n        yPosition = 20;\n      }\n      doc.text(`${index + 1}`, 20, yPosition);\n      doc.text(item.name, 35, yPosition);\n      doc.text(item.quantity.toString(), 120, yPosition);\n      doc.text(`Rs. ${item.price.toFixed(2)}`, 140, yPosition);\n      doc.text(`Rs. ${item.total.toFixed(2)}`, 170, yPosition);\n      yPosition += 8;\n    });\n\n    // Summary Box\n    yPosition += 5;\n    doc.setDrawColor(200, 200, 200);\n    doc.rect(15, yPosition - 5, pageWidth - 30, 40);\n\n    // Payment Summary\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.text(\"Total Amount:\", 120, yPosition);\n    doc.text(`Rs. ${totalAmount.toFixed(2)}`, 170, yPosition);\n    yPosition += 8;\n    if (paymentMethod === 'cash') {\n      const givenAmount = parseFloat(amountGiven);\n      const changeAmount = givenAmount - totalAmount;\n      doc.text(\"Amount Given:\", 120, yPosition);\n      doc.text(`Rs. ${givenAmount.toFixed(2)}`, 170, yPosition);\n      yPosition += 8;\n      doc.text(\"Change:\", 120, yPosition);\n      doc.text(`Rs. ${Math.max(0, changeAmount).toFixed(2)}`, 170, yPosition);\n    } else {\n      doc.text(\"Transaction ID:\", 120, yPosition);\n      doc.setFont(\"Helvetica\", \"normal\");\n      doc.text(transactionIdRef.current || 'N/A', 170, yPosition);\n    }\n\n    // Footer\n    yPosition += 20;\n    doc.setFont(\"Helvetica\", \"normal\");\n    doc.setFontSize(9);\n    doc.text(\"Thank you for your business!\", centerX, yPosition, {\n      align: \"center\"\n    });\n\n    // Save PDF to send to backend\n    return doc.output('blob');\n  };\n\n  // Handle payment method selection\n  const handlePaymentMethodChange = method => {\n    setPaymentMethod(method);\n    if (method === 'cash') {\n      setQrStatus(QR_STATES.IDLE);\n      // Clear any existing QR code data\n      if (statusCheckIntervalRef.current) {\n        clearInterval(statusCheckIntervalRef.current);\n      }\n    } else if (method === 'online') {\n      setExchange(0);\n      fetchFonePayQR();\n    }\n  };\n\n  // Handler for numeric inputs to prevent negative values\n  const handleNumericInput = (e, setter) => {\n    const value = e.target.value;\n    // Only set the value if it's empty or a positive number\n    if (value === '' || parseFloat(value) >= 0) {\n      setter(value);\n    }\n  };\n\n  // Handle double click on image to show in full screen\n  const handleImageDoubleClick = imageUrl => {\n    if (imageUrl) {\n      setCurrentImageUrl(imageUrl);\n      setShowImageViewer(true);\n    }\n  };\n\n  // Close the image viewer\n  const closeImageViewer = () => {\n    setShowImageViewer(false);\n    setCurrentImageUrl('');\n  };\n\n  // Render QR code section based on status\n  const renderQrSection = () => {\n    switch (qrStatus) {\n      case QR_STATES.IDLE:\n        return null;\n      case QR_STATES.LOADING:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: \"Generating QR code...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 16\n        }, this);\n      case QR_STATES.SUCCESS:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '200px',\n              height: '200px',\n              backgroundColor: '#f0f0f0',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              margin: '0 auto',\n              border: '1px solid #ddd',\n              cursor: 'pointer'\n            },\n            onDoubleClick: () => handleImageDoubleClick('https://placeholder.com/qr-code'),\n            children: \"QR Code Placeholder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontWeight: 'bold',\n              margin: '10px 0'\n            },\n            children: [\"Scan to pay Rs. \", totalAmount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#555',\n              fontSize: '14px'\n            },\n            children: \"Waiting for payment...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this);\n      case QR_STATES.PAID:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#27ae60',\n              fontWeight: 'bold',\n              fontSize: '18px'\n            },\n            children: \"\\u2705 Payment Successful!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this);\n      case QR_STATES.FAILED:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#e74c3c',\n            fontWeight: 'bold',\n            textAlign: 'center'\n          },\n          children: \"\\u274C Payment Failed. Please try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 16\n        }, this);\n      case QR_STATES.ERROR:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#e74c3c',\n            fontWeight: 'bold',\n            textAlign: 'center'\n          },\n          children: \"Error generating QR code. Please try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 16\n        }, this);\n      default:\n        return null;\n    }\n  };\n\n  // Render exchange section for cash payments\n  const renderExchangeSection = () => {\n    if (!(exchange !== 0 || amountGiven)) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '10px',\n        marginTop: '10px',\n        backgroundColor: exchange === 0 ? '#e8f5e9' : exchange > 0 ? '#fff3e0' : '#ffebee',\n        borderRadius: '4px',\n        textAlign: 'center'\n      },\n      children: exchange === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#2e7d32'\n        },\n        children: \"\\u2713 Amount is exact\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 11\n      }, this) : exchange > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#f57c00'\n        },\n        children: [\"Change to return: Rs. \", exchange.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#c62828'\n        },\n        children: \"Amount is insufficient\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Full-screen image viewer component\n  const ImageViewer = () => {\n    if (!showImageViewer) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        backgroundColor: 'rgba(0, 0, 0, 0.9)',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000\n      },\n      onClick: closeImageViewer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '20px',\n          right: '20px',\n          color: 'white',\n          cursor: 'pointer',\n          fontSize: '24px',\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          width: '40px',\n          height: '40px',\n          borderRadius: '50%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: currentImageUrl,\n        alt: \"Enlarged View\",\n        style: {\n          maxWidth: '90%',\n          maxHeight: '90%',\n          objectFit: 'contain'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          bottom: '20px',\n          color: 'white',\n          fontSize: '14px'\n        },\n        children: \"Press ESC to close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 619,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(ImageViewer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Welcome!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Billing System\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.formContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 20px 0'\n          },\n          children: \"Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: styles.label,\n            children: \"Select Item or Type Item Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedItem ? selectedItem.id : '',\n              onChange: e => {\n                const selected = items.find(item => item.id.toString() === e.target.value);\n                setSelectedItem(selected);\n                setCustomItemName(''); // Clear custom input when dropdown is used\n              },\n              style: {\n                ...styles.input,\n                marginBottom: '10px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Select an Item --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 17\n              }, this), items.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item.id,\n                children: [item.name, \" - Rs. \", item.price]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 704,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 15\n            }, this), selectedItem && selectedItem.imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '10px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: selectedItem.imageUrl,\n                alt: selectedItem.name,\n                style: {\n                  width: '100px',\n                  height: '100px',\n                  objectFit: 'cover',\n                  border: '1px solid #ddd',\n                  borderRadius: '4px',\n                  cursor: 'pointer'\n                },\n                onDoubleClick: () => handleImageDoubleClick(selectedItem.imageUrl)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 712,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Or type a custom item name\",\n            value: customItemName,\n            onChange: e => {\n              setCustomItemName(e.target.value);\n              setSelectedItem(null); // Clear dropdown when custom name is entered\n            },\n            style: styles.input\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: styles.label,\n            children: \"Unit Price (Rs.)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 744,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"0\",\n            value: customItemName ? customItemPrice : selectedItem ? selectedItem.price : '',\n            onChange: e => handleNumericInput(e, setCustomItemPrice),\n            style: styles.input,\n            disabled: selectedItem !== null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: styles.label,\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"0\",\n            value: quantity,\n            onChange: e => handleNumericInput(e, setQuantity),\n            style: styles.input\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addItemToBill,\n          style: {\n            ...styles.button,\n            ...styles.primaryButton\n          },\n          children: \"Add Item to Bill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 11\n        }, this), customItemName && customItemPrice && customItemImage && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveCustomItem,\n          style: {\n            ...styles.button,\n            ...styles.orangeButton,\n            marginTop: '10px'\n          },\n          children: \"Save as New Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '600px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.titleRow,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: '0'\n            },\n            children: \"Bill Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 789,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: refreshBill,\n            style: styles.refreshButton,\n            children: \"\\uD83D\\uDD04 Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 790,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 788,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.invoiceInfo,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Invoice #:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 13\n          }, this), \" \", isLoadingInvoiceNumber ? \"Loading...\" : invoiceNumber, \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Cashier:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 99\n          }, this), \" \", username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 11\n        }, this), billItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"No items added yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n          style: styles.table,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Item Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 809,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Unit Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 810,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 811,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 812,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 813,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 807,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 806,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: billItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: styles.td,\n                children: item.imageUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.imageUrl,\n                  alt: item.name,\n                  style: {\n                    width: '40px',\n                    height: '40px',\n                    objectFit: 'cover',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  },\n                  onDoubleClick: () => handleImageDoubleClick(item.imageUrl)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 821,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '40px',\n                    height: '40px',\n                    backgroundColor: '#f0f0f0',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: '10px',\n                    color: '#888',\n                    borderRadius: '4px'\n                  },\n                  children: \"No Image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 835,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: styles.td,\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 850,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: styles.td,\n                children: item.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 851,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: styles.td,\n                children: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 852,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: styles.td,\n                children: item.total\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 853,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: styles.td,\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeItem(index),\n                  style: styles.deleteButton,\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 855,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 816,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 805,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.highlightAmount,\n            children: [\"Total Amount: Rs. \", totalAmount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 869,\n            columnNumber: 13\n          }, this), billItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.paymentButtons,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPaymentMethod('cash'),\n              style: {\n                ...styles.paymentButton,\n                ...styles.cashButton,\n                ...(paymentMethod === 'cash' ? styles.activeButton : {})\n              },\n              children: \"\\uD83D\\uDCB0 Cash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 874,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPaymentMethod('online'),\n              style: {\n                ...styles.paymentButton,\n                ...styles.onlineButton,\n                ...(paymentMethod === 'online' ? styles.activeButton : {})\n              },\n              children: \"\\uD83C\\uDF10 Online\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 885,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 873,\n            columnNumber: 15\n          }, this), paymentMethod === 'cash' && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.paymentSection,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.amountInputContainer,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: amountGiven,\n                onChange: e => setAmountGiven(e.target.value),\n                placeholder: \"Amount Given\",\n                style: styles.amountInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 902,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: calculateExchange,\n                style: styles.calculateButton,\n                children: \"Calculate Change \\uD83D\\uDCB1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 901,\n              columnNumber: 17\n            }, this), amountGiven && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '10px',\n                marginTop: '10px',\n                backgroundColor: exchange === 0 ? '#e8f5e9' : exchange > 0 ? '#fff3e0' : '#ffebee',\n                borderRadius: '4px',\n                textAlign: 'center'\n              },\n              children: exchange === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: '#2e7d32'\n                },\n                children: \"\\u2713 Amount is exact\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 926,\n                columnNumber: 23\n              }, this) : exchange > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: '#f57c00'\n                },\n                children: [\"Change to return: Rs. \", exchange.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 928,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: '#c62828'\n                },\n                children: \"Amount is insufficient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 930,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 918,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 900,\n            columnNumber: 15\n          }, this), paymentMethod === 'online' && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.paymentSection,\n            children: renderQrSection()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 939,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 787,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 676,\n    columnNumber: 5\n  }, this);\n}\n_s(Billing, \"i3es6ENG0xAfgs8zbMoo8i4E4MY=\");\n_c = Billing;\nexport default Billing;\nvar _c;\n$RefreshReg$(_c, \"Billing\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsPDF","styles","fontLoader","jsxDEV","_jsxDEV","API_BASE_URL","QR_STATES","IDLE","LOADING","SUCCESS","ERROR","PAID","FAILED","Billing","username","_s","items","setItems","selectedItem","setSelectedItem","customItemName","setCustomItemName","customItemPrice","setCustomItemPrice","customItemImage","setCustomItemImage","quantity","setQuantity","billItems","setBillItems","amountGiven","setAmountGiven","exchange","setExchange","paymentMethod","setPaymentMethod","qrStatus","setQrStatus","qrImageUrl","setQrImageUrl","invoiceNumber","setInvoiceNumber","isLoadingInvoiceNumber","setIsLoadingInvoiceNumber","showImageViewer","setShowImageViewer","currentImageUrl","setCurrentImageUrl","statusCheckIntervalRef","transactionIdRef","fileInputRef","fetchLastInvoiceNumber","fetchItems","current","clearInterval","handleEscKey","event","key","window","addEventListener","removeEventListener","response","get","data","error","console","lastInvoiceNumber","lastNumber","parseInt","newInvoiceNumber","toString","padStart","calculateTotalAmount","reduce","total","item","totalAmount","addItemToBill","alert","itemPrice","parseFloat","price","itemImage","imageUrl","itemName","name","quantityToAdd","existingItemIndex","findIndex","updatedBillItems","existingItem","newItem","resetItemFields","value","removeItem","itemIndex","updatedItems","filter","_","index","refreshBill","length","confirmRefresh","confirm","handlePaymentComplete","invoiceData","seller","date","Date","toISOString","transactionId","cashier","post","status","Error","generateInvoicePDF","calculateExchange","exchangeAmount","fetchFonePayQR","uniqueTransactionId","now","setTimeout","startPaymentStatusCheck","saveCustomItem","formData","FormData","append","headers","printBill","pdfBlob","JSON","stringify","doc","pageHeight","internal","pageSize","height","pageWidth","width","centerX","yPosition","setFont","setFontSize","text","align","setDrawColor","rect","toLocaleString","toUpperCase","setFillColor","forEach","addPage","toFixed","givenAmount","changeAmount","Math","max","output","handlePaymentMethodChange","method","handleNumericInput","e","setter","target","handleImageDoubleClick","closeImageViewer","renderQrSection","style","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","display","alignItems","justifyContent","margin","border","cursor","onDoubleClick","fontWeight","color","fontSize","renderExchangeSection","padding","marginTop","borderRadius","ImageViewer","position","top","left","flexDirection","zIndex","onClick","right","src","alt","maxWidth","maxHeight","objectFit","bottom","container","header","formContainer","formGroup","label","id","onChange","selected","find","input","marginBottom","map","type","placeholder","min","disabled","button","primaryButton","orangeButton","titleRow","refreshButton","invoiceInfo","table","th","td","deleteButton","highlightAmount","paymentButtons","paymentButton","cashButton","activeButton","onlineButton","paymentSection","amountInputContainer","amountInput","calculateButton","_c","$RefreshReg$"],"sources":["/home/sonic/Downloads/pos-frontend/src/Billing.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport jsPDF from 'jspdf';\nimport styles from './style'\n// Import custom font to support Devanagari script (Nepali)\nimport \"jspdf-autotable\";\nimport { fontLoader } from 'jspdf';\n// Constants\nconst API_BASE_URL = 'http://localhost:5000';\nconst QR_STATES = {\n  IDLE: 'idle',\n  LOADING: 'loading',\n  SUCCESS: 'success',\n  ERROR: 'error',\n  PAID: 'paid',\n  FAILED: 'failed'\n};\n\nfunction Billing({ username }) {\n  // State for item management\n  const [items, setItems] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [customItemName, setCustomItemName] = useState('');\n  const [customItemPrice, setCustomItemPrice] = useState('');\n  const [customItemImage, setCustomItemImage] = useState(null);\n  const [quantity, setQuantity] = useState('');\n  const [billItems, setBillItems] = useState([]);\n  \n  // State for payment handling\n  const [amountGiven, setAmountGiven] = useState('');\n  const [exchange, setExchange] = useState(0);\n  const [paymentMethod, setPaymentMethod] = useState(null);\n  const [qrStatus, setQrStatus] = useState(QR_STATES.IDLE);\n  const [qrImageUrl, setQrImageUrl] = useState('');\n  \n  // State for invoice management\n  const [invoiceNumber, setInvoiceNumber] = useState('');\n  const [isLoadingInvoiceNumber, setIsLoadingInvoiceNumber] = useState(true);\n  \n  // State for image viewer\n  const [showImageViewer, setShowImageViewer] = useState(false);\n  const [currentImageUrl, setCurrentImageUrl] = useState('');\n  \n  // Refs\n  const statusCheckIntervalRef = useRef(null);\n  const transactionIdRef = useRef(null);\n  const fileInputRef = useRef(null);\n  \n  // Initialize component - fetch invoice number and items\n  useEffect(() => {\n    fetchLastInvoiceNumber();\n    fetchItems();\n    \n    // Cleanup function for intervals when component unmounts\n    return () => {\n      if (statusCheckIntervalRef.current) {\n        clearInterval(statusCheckIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Add ESC key listener for closing image viewer\n  useEffect(() => {\n    const handleEscKey = (event) => {\n      if (event.key === 'Escape' && showImageViewer) {\n        setShowImageViewer(false);\n      }\n    };\n\n    window.addEventListener('keydown', handleEscKey);\n    \n    // Cleanup event listener when component unmounts\n    return () => {\n      window.removeEventListener('keydown', handleEscKey);\n    };\n  }, [showImageViewer]);\n\n  // Fetch available items from backend\n  const fetchItems = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/items`);\n      setItems(response.data);\n    } catch (error) {\n      console.error('Error fetching items:', error);\n    }\n  };\n  \n  // Fetch the last invoice number and generate next one\n  const fetchLastInvoiceNumber = async () => {\n    setIsLoadingInvoiceNumber(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/last-invoice-number`);\n      \n      if (response.data && typeof response.data.lastInvoiceNumber !== 'undefined') {\n        const lastNumber = parseInt(response.data.lastInvoiceNumber, 10) || 0;\n        const newInvoiceNumber = (lastNumber + 1).toString().padStart(5, '0');\n        setInvoiceNumber(newInvoiceNumber);\n      } else {\n        setInvoiceNumber('00001');\n      }\n    } catch (error) {\n      console.error('Error fetching last invoice number:', error);\n      setInvoiceNumber('00001'); // Start with '00001' if there's an error\n    } finally {\n      setIsLoadingInvoiceNumber(false);\n    }\n  };\n\n  // Calculate the total bill amount\n  const calculateTotalAmount = () => {\n    return billItems.reduce((total, item) => total + item.total, 0);\n  };\n  \n  const totalAmount = calculateTotalAmount();\n  // Add selected item to the bill\n  const addItemToBill = () => {\n    if ((!selectedItem && !customItemName) || !quantity) {\n      alert('Please select or enter an item and enter quantity.');\n      return;\n    }\n\n    const itemPrice = customItemName ? parseFloat(customItemPrice || '0') : selectedItem.price;\n    const itemImage = selectedItem ? selectedItem.imageUrl : null;\n    const itemName = customItemName || selectedItem.name;\n    const quantityToAdd = parseInt(quantity);\n    \n    // Check if item already exists in the bill\n    const existingItemIndex = billItems.findIndex(item => item.name === itemName);\n    \n    if (existingItemIndex !== -1) {\n      // Update existing item\n      const updatedBillItems = [...billItems];\n      const existingItem = updatedBillItems[existingItemIndex];\n      \n      existingItem.quantity += quantityToAdd;\n      existingItem.total = existingItem.price * existingItem.quantity;\n      \n      setBillItems(updatedBillItems);\n    } else {\n      // Add new item\n      const newItem = {\n        name: itemName,\n        price: itemPrice,\n        quantity: quantityToAdd,\n        total: itemPrice * quantityToAdd,\n        imageUrl: itemImage,\n      };\n      \n      setBillItems([...billItems, newItem]);\n    }\n    \n    resetItemFields();\n  };\n\n  // Reset item input fields\n  const resetItemFields = () => {\n    setQuantity('');\n    setSelectedItem(null);\n    setCustomItemName('');\n    setCustomItemPrice('');\n    setCustomItemImage(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Remove an item from the bill\n  const removeItem = (itemIndex) => {\n    const updatedItems = billItems.filter((_, index) => index !== itemIndex);\n    setBillItems(updatedItems);\n  };\n\n  // Reset the entire billing form\n  const refreshBill = () => {\n    // Confirm before refreshing if there are items in the bill\n    if (billItems.length > 0) {\n      const confirmRefresh = window.confirm(\"Are you sure you want to clear the current bill and start over?\");\n      if (!confirmRefresh) return;\n    }\n    \n    // Reset all states to initial values\n    setBillItems([]);\n    resetItemFields();\n    setAmountGiven('');\n    setExchange(0);\n    setPaymentMethod(null);\n    setQrStatus(QR_STATES.IDLE);\n    setQrImageUrl('');\n    \n    // Fetch a new invoice number for the next bill\n    fetchLastInvoiceNumber();\n    \n    // Clear any ongoing interval\n    if (statusCheckIntervalRef.current) {\n      clearInterval(statusCheckIntervalRef.current);\n      statusCheckIntervalRef.current = null;\n    }\n    \n    transactionIdRef.current = null;\n  };\n\n  // Handle payment completion and save invoice\n  const handlePaymentComplete = async () => {\n    if (isLoadingInvoiceNumber) {\n      alert(\"Invoice number is still loading. Please wait a moment.\");\n      return;\n    }\n    \n    if (!invoiceNumber) {\n      alert(\"Invalid invoice number. Please refresh the page and try again.\");\n      return;\n    }\n    \n    // Prepare invoice data\n    const invoiceData = {\n      invoiceNumber,\n      seller: username,\n      date: new Date().toISOString(),\n      items: billItems,\n      totalAmount,\n      paymentMethod,\n      transactionId: paymentMethod === \"online\" ? transactionIdRef.current : null,\n      amountGiven: paymentMethod === \"cash\" ? parseFloat(amountGiven) : null,\n      exchange: paymentMethod === \"cash\" ? exchange : null,\n      cashier: username\n    };\n  \n    try {\n      // Save invoice to database\n      const response = await axios.post(`${API_BASE_URL}/save-invoice`, invoiceData);\n  \n      if (response.status !== 201) {\n        throw new Error(\"Failed to save invoice to the database.\");\n      }\n      \n      // Generate and print PDF\n      generateInvoicePDF(invoiceData);\n      \n      // Reset the form for a new bill\n      refreshBill();\n      \n    } catch (error) {\n      console.error(\"Error saving invoice:\", error);\n      alert(\"Failed to save invoice. Please try again.\");\n    }\n  };\n\n  // Calculate exchange amount for cash payments\n  const calculateExchange = () => {\n    if (!amountGiven) {\n      alert('Please enter the amount given by the customer.');\n      return;\n    }\n    const exchangeAmount = parseFloat(amountGiven) - totalAmount;\n    setExchange(exchangeAmount);\n    \n    // If exchange is valid, automatically save the invoice\n    if (exchangeAmount >= 0) {\n      handlePaymentComplete();\n    } else {\n      alert('Amount given is less than the total amount!');\n    }\n  };\n\n  // Fetch FonePay QR code for online payment\n  const fetchFonePayQR = async () => {\n    try {\n      setQrStatus(QR_STATES.LOADING);\n      \n      // Generate a unique transaction ID\n      const uniqueTransactionId = `ORDER-${Date.now()}`;\n      transactionIdRef.current = uniqueTransactionId;\n      \n      // In a real application, you would make this API call to FonePay\n      // For demo purposes, we're simulating the API response\n      setTimeout(() => {\n        setQrImageUrl('https://placeholder.com/qr-code'); // Placeholder QR image\n        setQrStatus(QR_STATES.SUCCESS);\n        startPaymentStatusCheck(uniqueTransactionId);\n      }, 1500);\n      \n    } catch (error) {\n      console.error('Error fetching QR code:', error);\n      setQrStatus(QR_STATES.ERROR);\n    }\n  };\n  \n  // Start checking for payment status\n  const startPaymentStatusCheck = (transactionId) => {\n    if (statusCheckIntervalRef.current) {\n      clearInterval(statusCheckIntervalRef.current);\n    }\n    \n    // For demo purposes, we'll simulate a successful payment after 5 seconds\n    statusCheckIntervalRef.current = setTimeout(() => {\n      setQrStatus(QR_STATES.PAID);\n      handlePaymentComplete(); // Automatically save invoice when online payment is complete\n    }, 5000);\n  };\n\n  // Save custom item with image to database\n  const saveCustomItem = async () => {\n    if (!customItemName || !customItemPrice || !customItemImage) {\n      alert('Please enter item name, price, and select an image.');\n      return;\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('name', customItemName);\n      formData.append('price', customItemPrice);\n      formData.append('image', customItemImage);\n\n      const response = await axios.post(`${API_BASE_URL}/add-item`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      if (response.status === 201) {\n        alert('Item added successfully!');\n        fetchItems(); // Refresh the items list\n        resetItemFields();\n      }\n    } catch (error) {\n      console.error('Error saving custom item:', error);\n      alert('Failed to save item. Please try again.');\n    }\n  };\n\n  // Generate PDF and save invoice\n  const printBill = async () => {\n    if (isLoadingInvoiceNumber) {\n      alert(\"Invoice number is still loading. Please wait a moment.\");\n      return;\n    }\n    \n    if (!invoiceNumber) {\n      alert(\"Invalid invoice number. Please refresh the page and try again.\");\n      return;\n    }\n    \n    // Prepare invoice data\n    const invoiceData = {\n      invoiceNumber,\n      seller: username,\n      date: new Date().toISOString(),\n      items: billItems,\n      totalAmount,\n      paymentMethod,\n      transactionId: paymentMethod === \"online\" ? transactionIdRef.current : null,\n      amountGiven: paymentMethod === \"cash\" ? parseFloat(amountGiven) : null,\n      exchange: paymentMethod === \"cash\" ? exchange : null,\n      cashier: username\n    };\n  \n    try {\n      // Generate PDF document\n      const pdfBlob = generateInvoicePDF(invoiceData);\n      \n      // Create form data to send both invoice data and PDF\n      const formData = new FormData();\n      formData.append('invoice', JSON.stringify(invoiceData));\n      formData.append('pdf', pdfBlob, `invoice_${invoiceData.invoiceNumber}.pdf`);\n      \n      // Save invoice and PDF to database\n      const response = await axios.post(`${API_BASE_URL}/save-invoice`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n  \n      if (response.status !== 201) {\n        throw new Error(\"Failed to save invoice to the database.\");\n      }\n  \n      // Backend will handle the printing after saving invoice\n      refreshBill(); // Reset the form for a new bill\n      \n    } catch (error) {\n      console.error(\"Error saving invoice:\", error);\n      alert(\"Failed to save invoice. Please try again.\");\n    }\n  };\n  \n  // Generate PDF invoice and open print dialog\n  const generateInvoicePDF = (invoiceData) => {\n    const doc = new jsPDF();\n    const pageHeight = doc.internal.pageSize.height;\n    const pageWidth = doc.internal.pageSize.width;\n    const centerX = pageWidth / 2;\n    let yPosition = 20;\n\n    // Header - Company Info\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.setFontSize(20);\n    doc.text(\"New Rochak Khadya Udhyog\", centerX, yPosition, { align: \"center\" });\n    \n    yPosition += 10;\n    doc.setFontSize(12);\n    doc.text(\"Bharatpur-7, Chitwan\", centerX, yPosition, { align: \"center\" });\n    \n    // Contact Info\n    yPosition += 8;\n    doc.setFontSize(10);\n    doc.text(\"Mobile: 9845068407\", centerX, yPosition, { align: \"center\" });\n    yPosition += 6;\n    doc.text(\"PAN: 605233483\", centerX, yPosition, { align: \"center\" });\n    \n    // Bill Title\n    yPosition += 10;\n    doc.setFontSize(16);\n    doc.text(\"INVOICE\", centerX, yPosition, { align: \"center\" });\n\n    // Invoice Details Box\n    yPosition += 15;\n    doc.setFontSize(10);\n    doc.setDrawColor(200, 200, 200);\n    doc.rect(15, yPosition - 5, pageWidth - 30, 25);\n\n    // Left side details\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.text(\"Invoice No:\", 20, yPosition);\n    doc.text(\"Date:\", 20, yPosition + 8);\n    \n    // Right side details\n    doc.text(\"Cashier:\", pageWidth - 80, yPosition);\n    doc.text(\"Payment:\", pageWidth - 80, yPosition + 8);\n\n    // Values in normal font\n    doc.setFont(\"Helvetica\", \"normal\");\n    doc.text(invoiceNumber, 60, yPosition);\n    doc.text(new Date().toLocaleString(), 60, yPosition + 8);\n    doc.text(username, pageWidth - 40, yPosition);\n    doc.text(paymentMethod.toUpperCase(), pageWidth - 40, yPosition + 8);\n\n    // Items Table\n    yPosition += 25;\n    doc.setFillColor(240, 240, 240);\n    doc.rect(15, yPosition - 5, pageWidth - 30, 10, 'F');\n    \n    // Table Headers\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.text(\"#\", 20, yPosition);\n    doc.text(\"Item Description\", 35, yPosition);\n    doc.text(\"Qty\", 120, yPosition);\n    doc.text(\"Rate\", 140, yPosition);\n    doc.text(\"Amount\", 170, yPosition);\n\n    // Table Content\n    yPosition += 10;\n    doc.setFont(\"Helvetica\", \"normal\");\n    \n    billItems.forEach((item, index) => {\n      // Add new page if needed\n      if (yPosition > pageHeight - 60) {\n        doc.addPage();\n        yPosition = 20;\n      }\n\n      doc.text(`${index + 1}`, 20, yPosition);\n      doc.text(item.name, 35, yPosition);\n      doc.text(item.quantity.toString(), 120, yPosition);\n      doc.text(`Rs. ${item.price.toFixed(2)}`, 140, yPosition);\n      doc.text(`Rs. ${item.total.toFixed(2)}`, 170, yPosition);\n      yPosition += 8;\n    });\n\n    // Summary Box\n    yPosition += 5;\n    doc.setDrawColor(200, 200, 200);\n    doc.rect(15, yPosition - 5, pageWidth - 30, 40);\n\n    // Payment Summary\n    doc.setFont(\"Helvetica\", \"bold\");\n    doc.text(\"Total Amount:\", 120, yPosition);\n    doc.text(`Rs. ${totalAmount.toFixed(2)}`, 170, yPosition);\n    yPosition += 8;\n\n    if (paymentMethod === 'cash') {\n      const givenAmount = parseFloat(amountGiven);\n      const changeAmount = givenAmount - totalAmount;\n      \n      doc.text(\"Amount Given:\", 120, yPosition);\n      doc.text(`Rs. ${givenAmount.toFixed(2)}`, 170, yPosition);\n      yPosition += 8;\n      doc.text(\"Change:\", 120, yPosition);\n      doc.text(`Rs. ${Math.max(0, changeAmount).toFixed(2)}`, 170, yPosition);\n    } else {\n      doc.text(\"Transaction ID:\", 120, yPosition);\n      doc.setFont(\"Helvetica\", \"normal\");\n      doc.text(transactionIdRef.current || 'N/A', 170, yPosition);\n    }\n\n    // Footer\n    yPosition += 20;\n    doc.setFont(\"Helvetica\", \"normal\");\n    doc.setFontSize(9);\n    doc.text(\"Thank you for your business!\", centerX, yPosition, { align: \"center\" });\n\n    // Save PDF to send to backend\n    return doc.output('blob');\n  };\n  \n  // Handle payment method selection\n  const handlePaymentMethodChange = (method) => {\n    setPaymentMethod(method);\n    \n    if (method === 'cash') {\n      setQrStatus(QR_STATES.IDLE);\n      // Clear any existing QR code data\n      if (statusCheckIntervalRef.current) {\n        clearInterval(statusCheckIntervalRef.current);\n      }\n    } else if (method === 'online') {\n      setExchange(0);\n      fetchFonePayQR();\n    }\n  };\n  \n  // Handler for numeric inputs to prevent negative values\n  const handleNumericInput = (e, setter) => {\n    const value = e.target.value;\n    // Only set the value if it's empty or a positive number\n    if (value === '' || parseFloat(value) >= 0) {\n      setter(value);\n    }\n  };\n  \n  // Handle double click on image to show in full screen\n  const handleImageDoubleClick = (imageUrl) => {\n    if (imageUrl) {\n      setCurrentImageUrl(imageUrl);\n      setShowImageViewer(true);\n    }\n  };\n\n  // Close the image viewer\n  const closeImageViewer = () => {\n    setShowImageViewer(false);\n    setCurrentImageUrl('');\n  };\n  \n  // Render QR code section based on status\n  const renderQrSection = () => {\n    switch (qrStatus) {\n      case QR_STATES.IDLE:\n        return null;\n      case QR_STATES.LOADING:\n        return <p style={{ textAlign: 'center' }}>Generating QR code...</p>;\n      case QR_STATES.SUCCESS:\n        return (\n          <div style={{ textAlign: 'center' }}>\n            <div \n              style={{ \n                width: '200px', \n                height: '200px', \n                backgroundColor: '#f0f0f0',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                margin: '0 auto',\n                border: '1px solid #ddd',\n                cursor: 'pointer'\n              }}\n              onDoubleClick={() => handleImageDoubleClick('https://placeholder.com/qr-code')}\n            >\n              QR Code Placeholder\n            </div>\n            <p style={{ fontWeight: 'bold', margin: '10px 0' }}>Scan to pay Rs. {totalAmount}</p>\n            <p style={{ color: '#555', fontSize: '14px' }}>Waiting for payment...</p>\n          </div>\n        );\n      case QR_STATES.PAID:\n        return (\n          <div style={{ textAlign: 'center' }}>\n            <p style={{ color: '#27ae60', fontWeight: 'bold', fontSize: '18px' }}>✅ Payment Successful!</p>\n          </div>\n        );\n      case QR_STATES.FAILED:\n        return <p style={{ color: '#e74c3c', fontWeight: 'bold', textAlign: 'center' }}>❌ Payment Failed. Please try again.</p>;\n      case QR_STATES.ERROR:\n        return <p style={{ color: '#e74c3c', fontWeight: 'bold', textAlign: 'center' }}>Error generating QR code. Please try again.</p>;\n      default:\n        return null;\n    }\n  };\n\n  // Render exchange section for cash payments\n  const renderExchangeSection = () => {\n    if (!(exchange !== 0 || amountGiven)) return null;\n    \n    return (\n      <div\n        style={{\n          padding: '10px',\n          marginTop: '10px',\n          backgroundColor: exchange === 0 ? '#e8f5e9' : exchange > 0 ? '#fff3e0' : '#ffebee',\n          borderRadius: '4px',\n          textAlign: 'center'\n        }}\n      >\n        {exchange === 0 ? (\n          <div style={{ color: '#2e7d32' }}>✓ Amount is exact</div>\n        ) : exchange > 0 ? (\n          <div style={{ color: '#f57c00' }}>Change to return: Rs. {exchange.toFixed(2)}</div>\n        ) : (\n          <div style={{ color: '#c62828' }}>Amount is insufficient</div>\n        )}\n      </div>\n    );\n  };\n\n  // Full-screen image viewer component\n  const ImageViewer = () => {\n    if (!showImageViewer) return null;\n    \n    return (\n      <div \n        style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: '100vw',\n          height: '100vh',\n          backgroundColor: 'rgba(0, 0, 0, 0.9)',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        }}\n        onClick={closeImageViewer}\n      >\n        <div style={{\n          position: 'absolute',\n          top: '20px',\n          right: '20px',\n          color: 'white',\n          cursor: 'pointer',\n          fontSize: '24px',\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          width: '40px',\n          height: '40px',\n          borderRadius: '50%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        }}>\n          ✕\n        </div>\n        \n        <img \n          src={currentImageUrl} \n          alt=\"Enlarged View\"\n          style={{\n            maxWidth: '90%',\n            maxHeight: '90%',\n            objectFit: 'contain'\n          }}\n        />\n        \n        <div style={{\n          position: 'absolute',\n          bottom: '20px',\n          color: 'white',\n          fontSize: '14px'\n        }}>\n          Press ESC to close\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div style={styles.container}>\n      {/* Full-screen Image Viewer */}\n      <ImageViewer />\n\n      <div style={styles.header}>\n        <h2>Welcome!</h2>    \n        <h3>Billing System</h3>\n      </div>\n\n      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n        {/* Item Entry Section */}\n        <div style={styles.formContainer}>\n          <h3 style={{ margin: '0 0 20px 0' }}>Items</h3>\n          \n          <div style={styles.formGroup}>\n            <label style={styles.label}>Select Item or Type Item Name</label>\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\n              <select\n                value={selectedItem ? selectedItem.id : ''}\n                onChange={(e) => {\n                  const selected = items.find((item) => item.id.toString() === e.target.value);\n                  setSelectedItem(selected);\n                  setCustomItemName(''); // Clear custom input when dropdown is used\n                }}\n                style={{ ...styles.input, marginBottom: '10px' }}\n              >\n                <option value=\"\">-- Select an Item --</option>\n                {items.map((item) => (\n                  <option key={item.id} value={item.id}>\n                    {item.name} - Rs. {item.price}\n                  </option>\n                ))}\n              </select>\n              \n              {/* Preview of selected item image */}\n              {selectedItem && selectedItem.imageUrl && (\n                <div style={{ marginBottom: '10px' }}>\n                  <img \n                    src={selectedItem.imageUrl} \n                    alt={selectedItem.name}\n                    style={{ \n                      width: '100px', \n                      height: '100px', \n                      objectFit: 'cover',\n                      border: '1px solid #ddd',\n                      borderRadius: '4px',\n                      cursor: 'pointer'\n                    }}\n                    onDoubleClick={() => handleImageDoubleClick(selectedItem.imageUrl)}\n                  />\n                </div>\n              )}\n            </div>\n            \n            {/* Input for Custom Item */}\n            <input\n              type=\"text\"\n              placeholder=\"Or type a custom item name\"\n              value={customItemName}\n              onChange={(e) => {\n                setCustomItemName(e.target.value);\n                setSelectedItem(null); // Clear dropdown when custom name is entered\n              }}\n              style={styles.input}\n            />\n          </div>\n\n          <div style={styles.formGroup}>\n            <label style={styles.label}>Unit Price (Rs.)</label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              value={customItemName ? customItemPrice : (selectedItem ? selectedItem.price : '')}\n              onChange={(e) => handleNumericInput(e, setCustomItemPrice)}\n              style={styles.input}\n              disabled={selectedItem !== null}\n            />\n          </div>\n          <div style={styles.formGroup}>\n            <label style={styles.label}>Quantity</label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              value={quantity}\n              onChange={(e) => handleNumericInput(e, setQuantity)}\n              style={styles.input}\n            />\n          </div>\n\n          <button\n            onClick={addItemToBill}\n            style={{ ...styles.button, ...styles.primaryButton }}\n          >\n            Add Item to Bill\n          </button>\n          \n          {customItemName && customItemPrice && customItemImage && (\n            <button\n              onClick={saveCustomItem}\n              style={{ \n                ...styles.button, \n                ...styles.orangeButton, \n                marginTop: '10px' \n              }}\n            >\n              Save as New Item\n            </button>\n          )}\n        </div>\n\n        {/* Bill Summary Section */}\n        <div style={{ width: '600px' }}>\n          <div style={styles.titleRow}>\n            <h3 style={{ margin: '0' }}>Bill Summary</h3>\n            <button\n              onClick={refreshBill}\n              style={styles.refreshButton}\n            >\n              🔄 Reset\n            </button>\n          </div>\n          \n          <div style={styles.invoiceInfo}>\n            <strong>Invoice #:</strong> {isLoadingInvoiceNumber ? \"Loading...\" : invoiceNumber} | <strong>Cashier:</strong> {username}\n          </div>\n          \n          {billItems.length === 0 ? (\n            <div>No items added yet.</div>\n          ) : (\n            <table style={styles.table}>\n              <thead>\n                <tr>\n                  <th style={styles.th}>Image</th>\n                  <th style={styles.th}>Item Name</th>\n                  <th style={styles.th}>Unit Price</th>\n                  <th style={styles.th}>Quantity</th>\n                  <th style={styles.th}>Total</th>\n                  <th style={styles.th}>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {billItems.map((item, index) => (\n                  <tr key={index}>\n                    <td style={styles.td}>\n                      {item.imageUrl ? (\n                        <img \n                          src={item.imageUrl} \n                          alt={item.name}\n                          style={{ \n                            width: '40px', \n                            height: '40px', \n                            objectFit: 'cover',\n                            border: '1px solid #ddd',\n                            borderRadius: '4px',\n                            cursor: 'pointer'\n                          }}\n                          onDoubleClick={() => handleImageDoubleClick(item.imageUrl)}\n                        />\n                      ) : (\n                        <div style={{ \n                          width: '40px', \n                          height: '40px', \n                          backgroundColor: '#f0f0f0',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          fontSize: '10px',\n                          color: '#888',\n                          borderRadius: '4px'\n                        }}>\n                          No Image\n                        </div>\n                      )}\n                    </td>\n                    <td style={styles.td}>{item.name}</td>\n                    <td style={styles.td}>{item.price}</td>\n                    <td style={styles.td}>{item.quantity}</td>\n                    <td style={styles.td}>{item.total}</td>\n                    <td style={styles.td}>\n                      <button\n                        onClick={() => removeItem(index)}\n                        style={styles.deleteButton}\n                      >\n                        Delete\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n\n          <div>\n            <div style={styles.highlightAmount}>Total Amount: Rs. {totalAmount}</div>\n            \n            {/* Payment Method Selection */}\n            {billItems.length > 0 && (\n              <div style={styles.paymentButtons}>\n                <button\n                  onClick={() => setPaymentMethod('cash')}\n                  style={{\n                    ...styles.paymentButton,\n                    ...styles.cashButton,\n                    ...(paymentMethod === 'cash' ? styles.activeButton : {})\n                  }}\n                >\n                  💰 Cash\n                </button>\n                \n                <button\n                  onClick={() => setPaymentMethod('online')}\n                  style={{\n                    ...styles.paymentButton,\n                    ...styles.onlineButton,\n                    ...(paymentMethod === 'online' ? styles.activeButton : {})\n                  }}\n                >\n                  🌐 Online\n                </button>\n              </div>\n            )}\n            \n            {/* Cash Payment Section */}\n            {paymentMethod === 'cash' && (\n              <div style={styles.paymentSection}>\n                <div style={styles.amountInputContainer}>\n                  <input\n                    type=\"number\"\n                    value={amountGiven}\n                    onChange={(e) => setAmountGiven(e.target.value)}\n                    placeholder=\"Amount Given\"\n                    style={styles.amountInput}\n                  />\n                  <button\n                    onClick={calculateExchange}\n                    style={styles.calculateButton}\n                  >\n                    Calculate Change 💱\n                  </button>\n                </div>\n                \n                {amountGiven && (\n                  <div style={{\n                    padding: '10px',\n                    marginTop: '10px',\n                    backgroundColor: exchange === 0 ? '#e8f5e9' : exchange > 0 ? '#fff3e0' : '#ffebee',\n                    borderRadius: '4px',\n                    textAlign: 'center'\n                  }}>\n                    {exchange === 0 ? (\n                      <div style={{ color: '#2e7d32' }}>✓ Amount is exact</div>\n                    ) : exchange > 0 ? (\n                      <div style={{ color: '#f57c00' }}>Change to return: Rs. {exchange.toFixed(2)}</div>\n                    ) : (\n                      <div style={{ color: '#c62828' }}>Amount is insufficient</div>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {/* Online Payment Section */}\n            {paymentMethod === 'online' && (\n              <div style={styles.paymentSection}>\n                {renderQrSection()}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Billing;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}